---
title: "airquality_vignette"
author: "Lucas Rosenbusch"
date: "5/26/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(devtools)
library(gt)
library(airquality)

```

Welcome to the **airquality** package. This package uses various data from the [\textcolor{blue}{OpenWeatherMap API}](https://openweathermap.org/api).

It includes various functions that help you to get an overview about the airquality in any town. You can:

-   retrieve the current airquality index and airquality subcomponents
-   plot the airquality index and concentration of air quality components for the past two weeks
-   retrieve and compare the airquality index of the ten biggest European cities
-   get the current weather data

In the following, each function is explained in detail and examples are provided.

## How to Install the Airquality Package
```{r warning = FALSE}
#github_install can only be added when the week 3 branch is merged
#install_github('Programming-The-Next-Step-2022/airquality')
```

\newpage

## Current Airquality Data (data frame)
This function takes the city and country (use ISO 3166 country codes) of interest as arguments. It outputs a data frame containing the: 

* Air Quality Index (AQI) 
  + the aqi ranges from 1 = good to 5 = very Poor 
* Carbon monoxide concentration (CO) 
* Nitrogen monoxide concentration (NO) 
* Nitrogen dioxide concentration (NO2)
* Ozone concentration (O3) 
* Sulphur dioxide concentration (SO2) 
* Particulates concentration (PM2_5 and PM_10) 
* Ammonia concentration (NH3)
```{r warning = FALSE}
current_aq_df("Amsterdam", "NL")
```

To display the output to users in a nicer way, you can use the gt::gt() function 
```{r}
gt(current_aq_df())
```

## Plotting the AQI for the past two weeks
This function takes the city and country (use ISO 3166 country codes) of interest as arguments. It outputs a plot showing the average AQI per day over the last two weeks.

```{r}
plot_aqi_hist("Paris", "FRA")
```

## Plotting Air Quality Subcomponents for the Past two Weeks
This function takes the city, the country (use ISO 3166 country codes), and the desired subcomponent (e.g., co) as arguments. It outputs a plot showing the average concentration of for example carbon monoxide over the last two weeks.

```{r}
plot_comp_hist("Rome", "ITA")
```


## Current AQI of the 10 largest European Cities
This function shows the current AQI in the ten largest European cities. The values are colored according the AQI.
```{r}
current_aq_table()
```

## Current Weather Data
This function takes the city and country (use ISO 3166 country codes) of interest as arguments. It outputs a data frame containing the: 

* Current Weather 
* Current Temperature 
* Feels Like Temperature 
* Min Temperature 
* Max Temperature 
* Air Pressure 
* Humidity 
* Visibility 
* Wind Speed 
* Wind Direction 
* Sunrise 
* Sunset 
```{r}
current_weather("Berlin", "GER")
```

